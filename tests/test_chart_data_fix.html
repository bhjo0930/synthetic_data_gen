<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì°¨íŠ¸ ë°ì´í„° ì •ë ¬ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .result { margin: 10px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Location ì°¨íŠ¸ ë°ì´í„° ì •ë ¬ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h2>1. ê¸°ì¡´ ë°©ì‹ (ë¬¸ì œê°€ ìˆëŠ” ë°©ì‹)</h2>
        <div id="oldMethod"></div>
    </div>
    
    <div class="test-section">
        <h2>2. ìˆ˜ì •ëœ ë°©ì‹ (ì •ë ¬ëœ ë°©ì‹)</h2>
        <div id="newMethod"></div>
    </div>
    
    <div class="test-section">
        <h2>3. ì˜ˆìƒ ë¶„í¬ vs ì°¨íŠ¸ í‘œì‹œ ë¹„êµ</h2>
        <div id="comparison"></div>
    </div>

    <script>
        // ìƒ˜í”Œ ë°ì´í„° (ì‹¤ì œ í”„ë¡œê·¸ë¨ì—ì„œ ìƒì„±ë  ìˆ˜ ìˆëŠ” ì§€ì—­ ë¶„í¬)
        const sampleLocationData = {
            "ê´‘ì£¼ê´‘ì—­ì‹œ": 29,
            "ê²½ê¸°ë„": 264,
            "ì„œìš¸íŠ¹ë³„ì‹œ": 195,
            "ëŒ€ì „ê´‘ì—­ì‹œ": 30,
            "ë¶€ì‚°ê´‘ì—­ì‹œ": 66,
            "ì¸ì²œê´‘ì—­ì‹œ": 57,
            "ìš¸ì‚°ê´‘ì—­ì‹œ": 22,
            "ëŒ€êµ¬ê´‘ì—­ì‹œ": 47,
            "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ": 7,
            "ê°•ì›ë„": 28,
            "ì¶©ì²­ë¶ë„": 30,
            "ì¶©ì²­ë‚¨ë„": 39,
            "ì „ë¼ë¶ë„": 33,
            "ì „ë¼ë‚¨ë„": 31,
            "ê²½ìƒë¶ë„": 48,
            "ê²½ìƒë‚¨ë„": 62,
            "ì œì£¼íŠ¹ë³„ìì¹˜ë„": 12
        };

        // ì˜ˆìƒ ë¶„í¬ (í”„ë¡œê·¸ë¨ ë‚´ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ê¸°ì¤€)
        const expectedDistribution = {
            "ê²½ê¸°ë„": 26.4,
            "ì„œìš¸íŠ¹ë³„ì‹œ": 19.5,
            "ë¶€ì‚°ê´‘ì—­ì‹œ": 6.6,
            "ê²½ìƒë‚¨ë„": 6.2,
            "ì¸ì²œê´‘ì—­ì‹œ": 5.7,
            "ê²½ìƒë¶ë„": 4.8,
            "ëŒ€êµ¬ê´‘ì—­ì‹œ": 4.7,
            "ì¶©ì²­ë‚¨ë„": 3.9,
            "ì „ë¼ë¶ë„": 3.3,
            "ì „ë¼ë‚¨ë„": 3.1,
            "ëŒ€ì „ê´‘ì—­ì‹œ": 3.0,
            "ì¶©ì²­ë¶ë„": 3.0,
            "ê´‘ì£¼ê´‘ì—­ì‹œ": 2.9,
            "ê°•ì›ë„": 2.8,
            "ìš¸ì‚°ê´‘ì—­ì‹œ": 2.2,
            "ì œì£¼íŠ¹ë³„ìì¹˜ë„": 1.2,
            "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ": 0.7
        };

        function testOldMethod() {
            console.log("=== ê¸°ì¡´ ë°©ì‹ í…ŒìŠ¤íŠ¸ ===");
            
            const labels = Object.keys(sampleLocationData).sort(); // ì•ŒíŒŒë²³ìˆœ ì •ë ¬
            const data = Object.values(sampleLocationData); // ì›ë˜ ìˆœì„œ
            
            let result = "<h3>ê¸°ì¡´ ë°©ì‹ ê²°ê³¼:</h3>";
            result += "<table border='1'><tr><th>ìˆœì„œ</th><th>ë¼ë²¨</th><th>ë°ì´í„°</th><th>ì‹¤ì œ ì§€ì—­</th></tr>";
            
            const originalKeys = Object.keys(sampleLocationData);
            
            for (let i = 0; i < labels.length; i++) {
                const isCorrect = labels[i] === originalKeys[i];
                const className = isCorrect ? "success" : "error";
                result += `<tr class="${className}">`;
                result += `<td>${i + 1}</td>`;
                result += `<td>${labels[i]}</td>`;
                result += `<td>${data[i]}</td>`;
                result += `<td>${originalKeys[i]} (${sampleLocationData[originalKeys[i]]})</td>`;
                result += `</tr>`;
            }
            result += "</table>";
            result += "<p class='error'>âŒ í‚¤ì™€ ê°’ì˜ ìˆœì„œê°€ ë§ì§€ ì•Šì•„ ì˜ëª»ëœ ì°¨íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤!</p>";
            
            document.getElementById('oldMethod').innerHTML = result;
        }

        function testNewMethod() {
            console.log("=== ìˆ˜ì •ëœ ë°©ì‹ í…ŒìŠ¤íŠ¸ ===");
            
            // ìˆ˜ì •ëœ ë°©ì‹: ê°’ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
            const sortedEntries = Object.entries(sampleLocationData).sort((a, b) => b[1] - a[1]);
            const labels = sortedEntries.map(entry => entry[0]);
            const data = sortedEntries.map(entry => entry[1]);
            
            let result = "<h3>ìˆ˜ì •ëœ ë°©ì‹ ê²°ê³¼:</h3>";
            result += "<table border='1'><tr><th>ìˆœìœ„</th><th>ì§€ì—­</th><th>ì¸êµ¬ìˆ˜</th><th>ë¹„ìœ¨</th></tr>";
            
            const total = data.reduce((sum, val) => sum + val, 0);
            
            for (let i = 0; i < labels.length; i++) {
                const percentage = (data[i] / total * 100).toFixed(1);
                result += `<tr>`;
                result += `<td>${i + 1}</td>`;
                result += `<td>${labels[i]}</td>`;
                result += `<td>${data[i]}</td>`;
                result += `<td>${percentage}%</td>`;
                result += `</tr>`;
            }
            result += "</table>";
            result += "<p class='success'>âœ… í‚¤ì™€ ê°’ì´ ì˜¬ë°”ë¥´ê²Œ ë§¤ì¹­ë˜ì–´ ì •í™•í•œ ì°¨íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤!</p>";
            
            document.getElementById('newMethod').innerHTML = result;
        }

        function compareWithExpected() {
            console.log("=== ì˜ˆìƒ ë¶„í¬ì™€ ë¹„êµ ===");
            
            const sortedEntries = Object.entries(sampleLocationData).sort((a, b) => b[1] - a[1]);
            const total = sortedEntries.reduce((sum, entry) => sum + entry[1], 0);
            
            let result = "<h3>ì˜ˆìƒ ë¶„í¬ vs ì‹¤ì œ ì°¨íŠ¸ í‘œì‹œ:</h3>";
            result += "<table border='1'><tr><th>ìˆœìœ„</th><th>ì§€ì—­</th><th>ì˜ˆìƒ(%)</th><th>ì°¨íŠ¸í‘œì‹œ(%)</th><th>ì°¨ì´</th></tr>";
            
            // ì˜ˆìƒ ë¶„í¬ ìˆœì„œ (í° ìˆœì„œëŒ€ë¡œ)
            const expectedOrder = Object.entries(expectedDistribution).sort((a, b) => b[1] - a[1]);
            
            for (let i = 0; i < Math.min(expectedOrder.length, sortedEntries.length); i++) {
                const expectedRegion = expectedOrder[i][0];
                const expectedPercent = expectedOrder[i][1];
                
                const actualRegion = sortedEntries[i][0];
                const actualPercent = (sortedEntries[i][1] / total * 100);
                
                const isCorrectOrder = expectedRegion === actualRegion;
                const className = isCorrectOrder ? "success" : "error";
                
                result += `<tr class="${className}">`;
                result += `<td>${i + 1}</td>`;
                result += `<td>ì˜ˆìƒ: ${expectedRegion}<br>ì‹¤ì œ: ${actualRegion}</td>`;
                result += `<td>${expectedPercent}%</td>`;
                result += `<td>${actualPercent.toFixed(1)}%</td>`;
                result += `<td>${isCorrectOrder ? 'âœ… ì¼ì¹˜' : 'âŒ ë¶ˆì¼ì¹˜'}</td>`;
                result += `</tr>`;
            }
            result += "</table>";
            
            document.getElementById('comparison').innerHTML = result;
        }

        // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        testOldMethod();
        testNewMethod();
        compareWithExpected();
        
        console.log("ì°¨íŠ¸ ë°ì´í„° ì •ë ¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!");
    </script>
</body>
</html>